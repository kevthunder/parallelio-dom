{"version":3,"file":"../PlayerSelectionInfo.js","sourceRoot":"../../src","sources":["PlayerSelectionInfo.coffee"],"names":[],"mappings":"AAAA,IAAA,OAAA,EAAA,UAAA,EAAA;;AAAA,OAAA,GAAU,OAAA,CAAQ,WAAR;;AACV,UAAA,GAAa,OAAA,CAAQ,cAAR;;AAEb,MAAM,CAAC,OAAP,GAAuB;EAAN,MAAA,oBAAA,QAAkC,QAAlC;IACf,WAAa,CAAA,CAAA;WACX,CAAA;MACA,IAAC,CAAA,WAAD,CAAA;MACA,IAAC,CAAA,OAAD,GAAW;MACX,IAAC,CAAA;MACD,IAAC,CAAA;MACD,IAAC,CAAA;IANU;;IAgDb,WAAa,CAAA,CAAA;MACX,IAAG,CAAC,IAAC,CAAA,gBAAF,IAAuB,IAAC,CAAA,IAAI,CAAC,MAAhC;QACE,IAAC,CAAA,gBAAD,GAAoB,IAAC,CAAA,IAAI,CAAC,OAD5B;;MAEA,IAAG,CAAC,IAAC,CAAA,MAAF,IAAa,IAAC,CAAA,IAAI,CAAC,aAAtB;eACE,IAAC,CAAA,MAAD,GAAU,IAAC,CAAA,IAAI,CAAC,cADlB;;IAHW;;EAjDE;;EASf,mBAAC,CAAA,UAAD,CACE;IAAA,OAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAC,WAAD,EAAc,SAAd,CAAA;AACN,YAAA;QAAA,GAAA,GAAM,SAAA,CAAA;QACN,GAAG,CAAC,IAAJ,CAAS,kGAAT;eACA;MAHM;IAAR,CADF;IAKA,MAAA,EACE;MAAA,OAAA,EAAS;IAAT,CANF;IAOA,SAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAC,WAAD,CAAA;eACN,WAAW,CAAC,QAAZ,CAAqB,iBAArB;MADM;IAAR,CARF;IAUA,IAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAC,WAAD,CAAA;AACN,YAAA;QAAA,GAAA,GAAM,WAAW,CAAC,IAAZ,CAAiB,WAAjB;QACN,IAAG,WAAH;iBACE,WAAW,CAAC,IAAZ,CAAiB,MAAjB,EAAwB,GAAxB,CAAA,IAAgC,GAAG,CAAC,WAAW,CAAC,KADlD;;MAFM,CAAR;MAIA,MAAA,EAAQ,IAAI,UAAJ,CAAe;QAAA,QAAA,EAAU,QAAA,CAAC,GAAD,CAAA;iBAC/B,IAAC,CAAA,OAAO,CAAC,IAAT,CAAc,OAAd,CAAsB,CAAC,IAAvB,CAA4B,IAAC,CAAA,IAA7B;QAD+B;MAAV,CAAf;IAJR,CAXF;IAkBA,OAAA,EACE;MAAA,UAAA,EAAY,IAAZ;MACA,MAAA,EAAQ,QAAA,CAAC,WAAD,CAAA;eACN,WAAW,CAAC,QAAZ,CAAqB,yBAArB,CAAA,IAAmD;MAD7C,CADR;MAGA,MAAA,EAAQ,QAAA,CAAA,CAAA;AACN,YAAA;QAAA,IAAA,GAAO,IAAC,CAAA,OAAO,CAAC,IAAT,CAAc,aAAd;QACP,IAAI,CAAC,KAAL,CAAA;eACA,IAAC,CAAA,OAAO,CAAC,OAAT,CAAiB,CAAC,MAAD,CAAA,GAAA;AACf,cAAA,OAAA,EAAA;UAAA,IAAA,GAAO,MAAM,CAAC,IAAP,IAAe,MAAM,CAAC,WAAW,CAAC;UACzC,OAAA,GAAU,CAAA,CAAE,MAAA,GAAO,IAAP,GAAY,OAAd;UACV,OAAO,CAAC,EAAR,CAAW,OAAX,EAAoB,CAAA,CAAA,GAAA;mBAClB,IAAC,CAAA,MAAM,CAAC,YAAR,CAAqB,MAArB;UADkB,CAApB;iBAEA,IAAI,CAAC,MAAL,CAAY,OAAZ;QALe,CAAjB;MAHM;IAHR,CAnBF;IAkCA,IAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAC,GAAD,CAAA;QACN,IAAG,IAAC,CAAA,IAAJ;iBACE,IAAC,CAAA,WAAD,CAAA,EADF;;MADM;IAAR;EAnCF,CADF","sourcesContent":["Display = require('./Display')\nDomUpdater = require('./DomUpdater')\n\nmodule.exports = class PlayerSelectionInfo extends Display\n  constructor: () ->\n    super()\n    @initDisplay()\n    @baseCls = 'selectionInfo'\n    @name\n    @game\n    @actions\n\n  @properties\n    display:\n      calcul: (invalidator, overrided)->\n        div = overrided()\n        div.html('<div class=\"name\"></div><div class=\"actions\"><span class=\"title\">Actions :</span><ul></ul></div>')\n        div\n    player:\n      default: null\n    selection:\n      calcul: (invalidator)->\n        invalidator.propPath(\"player.selected\")\n    name:\n      calcul: (invalidator) ->\n        sel = invalidator.prop(\"selection\")\n        if sel?\n          invalidator.prop(\"name\",sel) || sel.constructor.name\n      change: new DomUpdater callback: (old)->\n        @display.find(\".name\").text(@name)\n\n    actions:\n      collection: true \n      calcul: (invalidator)->\n        invalidator.propPath(\"player.availableActions\") || []\n      change: ->\n        list = @display.find(\".actions ul\")\n        list.empty()\n        @actions.forEach (action) =>\n          name = action.name || action.constructor.name\n          display = $('<li>'+name+'</li>')\n          display.on \"click\", =>\n            @player.selectAction(action)\n          list.append(display)\n\n\n\n    game:\n      change: (old)->\n        if @game \n          @setDefaults()\n\n  setDefaults: ()->\n    if !@displayContainer and @game.mainUI\n      @displayContainer = @game.mainUI\n    if !@player and @game.currentPlayer\n      @player = @game.currentPlayer\n\n\n"]}