{"version":3,"file":"../Damageable.js","sourceRoot":"../../src","sources":["Damageable.coffee"],"names":[],"mappings":"AAAA,IAAA,cAAA,EAAA,UAAA,EAAA,OAAA,EAAA,UAAA,EAAA;;AAAA,cAAA,GAAiB,OAAA,CAAQ,YAAR,CAAqB,CAAC;;AACvC,OAAA,GAAU,OAAA,CAAQ,WAAR;;AACV,UAAA,GAAa,OAAA,CAAQ,cAAR;;AACb,YAAA,GAAe,OAAA,CAAQ,eAAR,CAAwB,CAAC;;AAExC,MAAM,CAAC,OAAP,GAAuB;EAAN,MAAA,WAAA,QAAyB,eAAzB;IAIf,WAAa,CAAA,CAAA;WACX,CAAA;MACA,IAAC,CAAA,SAAD,CAAA;MACA,IAAC,CAAA,WAAD,CAAA;IAHW;;EAJE;;EACf,UAAC,CAAA,MAAD,CAAQ,OAAR;;EACA,UAAC,CAAA,OAAD,CAAS,YAAY,CAAC,SAAtB;;EAOA,UAAC,CAAA,UAAD,CACE;IAAA,cAAA,EACE;MAAA,OAAA,EAAS;IAAT,CADF;IAEA,SAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAC,WAAD,CAAA;eACN,SAAA,GAAW,CAAC,IAAI,CAAC,IAAL,CAAU,WAAW,CAAC,IAAZ,CAAiB,QAAjB,CAAA,GAA6B,WAAW,CAAC,IAAZ,CAAiB,WAAjB,CAA7B,GAA6D,WAAW,CAAC,IAAZ,CAAiB,gBAAjB,CAAvE,CAAD;MADL,CAAR;MAEA,MAAA,EAAQ,IAAI,UAAJ,CAAe;QAAA,QAAA,EAAU,QAAA,CAAC,GAAD,CAAA;UAC/B,IAAG,WAAH;YACE,IAAC,CAAA,OAAO,CAAC,WAAT,CAAqB,GAArB,EADF;;UAEA,IAAG,sBAAH;mBACE,IAAC,CAAA,OAAO,CAAC,QAAT,CAAkB,IAAC,CAAA,SAAnB,EADF;;QAH+B;MAAV,CAAf;IAFR;EAHF,CADF","sourcesContent":["BaseDamageable = require('parallelio').Damageable\nDisplay = require('./Display')\nDomUpdater = require('./DomUpdater')\nEventEmitter = require('spark-starter').EventEmitter\n\nmodule.exports = class Damageable extends BaseDamageable\n  @extend Display\n  @include EventEmitter.prototype\n  \n  constructor: () ->\n    super()\n    @healthCls()\n    @initDisplay()\n\n  @properties\n    healthClsSteps:\n      default: 10\n    healthCls:\n      calcul: (invalidator)->\n        'health-'+ (Math.ceil(invalidator.prop('health') / invalidator.prop('maxHealth') * invalidator.prop('healthClsSteps')))\n      change: new DomUpdater callback: (old)->\n        if old?\n          @display.removeClass(old)\n        if @healthCls?\n          @display.addClass(@healthCls)\n    \n"]}