{"version":3,"file":"../DomUpdater.js","sourceRoot":"../../src","sources":["DomUpdater.coffee"],"names":[],"mappings":"AAAA,IAAA,UAAA,EAAA;;AAAA,eAAA,GAAkB,OAAA,CAAQ,YAAR,CAAqB,CAAC,KAAK,CAAC,WAAW,CAAC;;AAE1D,MAAM,CAAC,OAAP,GAAuB,aAAN,MAAA,WAAA,QAAyB,gBAAzB;EAEf,WAAa,CAAC,OAAD,CAAA;SACX,CAAM,OAAN;EADW;;EAGb,IAAM,CAAA,CAAA;IACJ,IAAC,CAAA,iBAAD,GAAqB,CAAA,CAAA,GAAA;aAAG,IAAC,CAAA,SAAD,CAAA;IAAH;gBADvB,CAAA,IAEE,CAAA;EAFI;;EAIN,YAAc,CAAA,CAAA;IACZ,IAAG,CAAC,IAAC,CAAA,WAAL;MACE,IAAC,CAAA,WAAD,GAAe;aACf,MAAM,CAAC,qBAAP,CAA6B,IAAC,CAAA,iBAA9B,EAFF;;EADY;;EAKd,UAAY,CAAA,CAAA;WACV,IAAC,CAAA,YAAD,CAAA;EADU;;EAGZ,MAAQ,CAAA,CAAA;WACN,IAAC,CAAA,YAAD,CAAA;EADM;;EAGR,SAAW,CAAC,GAAD,CAAA;AACT,QAAA;IAAA,KAAA,GAAQ,IAAC,CAAA,WAAD,CAAA,CAAc,CAAC,GAAf,CAAA;IACR,IAAG,KAAA,KAAS,IAAC,CAAA,GAAb;MACE,IAAC,CAAA,GAAD,GAAO;MACP,IAAC,CAAA,YAAD,CAAc,KAAd,EAAqB,GAArB,EAFF;;WAGA,IAAC,CAAA,WAAD,GAAe;EALN;;AApBI","sourcesContent":["PropertyWatcher = require('parallelio').Spark.Invalidated.PropertyWatcher\n\nmodule.exports = class DomUpdater extends PropertyWatcher\n\n  constructor: (options)->\n    super(options)\n\n  init: ()->\n    @updateDomCallback = => @updateDom()\n    super()\n\n  requestFrame: () ->\n    if !@framebinded\n      @framebinded = true\n      window.requestAnimationFrame(@updateDomCallback)\n\n  invalidate: ->\n    @requestFrame()\n\n  update: ()->\n    @requestFrame()\n\n  updateDom: (old)->\n    value = @getProperty().get()\n    if value != @old\n      @old = value\n      @handleChange(value, old)\n    @framebinded = false"]}