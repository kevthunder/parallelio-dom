{"version":3,"file":"../Map.js","sourceRoot":"../../src","sources":["Map.coffee"],"names":[],"mappings":"AAAA,IAAA,OAAA,EAAA;;AAAA,OAAA,GAAU,OAAA,CAAQ,YAAR,CAAqB,CAAC;;AAEhC,MAAM,CAAC,OAAP,GAAuB;EAAN,MAAA,IAAA,QAAkB,QAAlB;IA0Bf,WAAa,CAAA,CAAA;MACX,IAAO,6BAAP;eACE,IAAC,CAAA,gBAAD,GAAoB,IAAC,CAAA,IAAI,CAAC,QAAQ,CAAC,eADrC;;IADW;;IAIb,cAAgB,CAAC,MAAD,CAAA;AACd,UAAA;MAAA,OAAA,GAAU,MAAM,CAAC,UAAP,CAAkB,IAAlB;aACV,IAAC,CAAA,SAAS,CAAC,OAAX,CAAmB,CAAC,QAAD,CAAA,GAAA;qDACjB,QAAQ,CAAC,KAAM,MAAK;MADH,CAAnB;IAFc;;EA9BD;;EACf,GAAC,CAAA,UAAD,CACE;IAAA,gBAAA,EACE;MAAA,OAAA,EAAS,IAAT;MACA,MAAA,EAAO,QAAA,CAAA,CAAA;QACL,IAAC,CAAA,SAAS,CAAC,OAAX,CAAmB,CAAC,QAAD,CAAA,GAAA;iBACjB,QAAQ,CAAC,gBAAT,GAA4B,IAAC,CAAA;QADZ,CAAnB;QAEA,IAAG,6BAAH;iBACE,IAAC,CAAA,gBAAgB,CAAC,MAAlB,CAAyB,IAAC,CAAA,gBAA1B,EADF;;MAHK;IADP,CADF;IAOA,IAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAC,GAAD,CAAA;QACN,IAAG,IAAC,CAAA,IAAJ;iBACE,IAAC,CAAA,WAAD,CAAA,EADF;;MADM;IAAR,CARF;IAWA,UAAA,EACE;MAAA,OAAA,EAAS;IAAT,CAZF;IAaA,gBAAA,EACE;MAAA,MAAA,EAAQ,QAAA,CAAA,CAAA;AACN,YAAA;QAAA,MAAA,GAAS,QAAQ,CAAC,aAAT,CAAuB,QAAvB;QACT,MAAM,CAAC,KAAP,GAAe,IAAC,CAAA,UAAU,CAAC,KAAZ,GAAoB,IAAC,CAAA,UAAU,CAAC,IAAhC,GAAuC,IAAC,CAAA,UAAD,GAAY;QAClE,MAAM,CAAC,MAAP,GAAgB,IAAC,CAAA,UAAU,CAAC,MAAZ,GAAqB,IAAC,CAAA,UAAU,CAAC,GAAjC,GAAuC,IAAC,CAAA,UAAD,GAAY;QACnE,MAAM,CAAC,SAAS,CAAC,GAAjB,CAAqB,eAArB;QACA,MAAM,CAAC,KAAK,CAAC,GAAb,GAAmB,IAAC,CAAA,UAAU,CAAC,GAAZ,GAAkB,IAAC,CAAA,UAAnB,GAAgC;QACnD,MAAM,CAAC,KAAK,CAAC,IAAb,GAAoB,IAAC,CAAA,UAAU,CAAC,IAAZ,GAAmB,IAAC,CAAA,UAApB,GAAiC;QACrD,IAAC,CAAA,cAAD,CAAgB,MAAhB;eACA;MARM;IAAR;EAdF,CADF","sourcesContent":["BaseMap = require('parallelio').Map\n\nmodule.exports = class Map extends BaseMap\n  @properties\n    displayContainer:\n      default: null\n      change:->\n        @locations.forEach (location)=>\n          location.displayContainer = @displayContainer\n        if @displayContainer?\n          @displayContainer.append(@backgroundCanvas)\n    game:\n      change: (old)->\n        if @game \n          @setDefaults()\n    starMargin:\n      default: 10\n    backgroundCanvas:\n      calcul: ->\n        canvas = document.createElement(\"canvas\");\n        canvas.width = @boundaries.right - @boundaries.left + @starMargin*2\n        canvas.height = @boundaries.bottom - @boundaries.top + @starMargin*2\n        canvas.classList.add(\"mapBackground\");\n        canvas.style.top = @boundaries.top - @starMargin + \"px\"\n        canvas.style.left = @boundaries.left - @starMargin + \"px\"\n        @drawBackground(canvas)\n        canvas\n\n  setDefaults: ->\n    unless @displayContainer?\n      @displayContainer = @game.mainView.contentDisplay\n      \n  drawBackground: (canvas)->\n    context = canvas.getContext('2d')\n    @locations.forEach (location)=>\n      location.draw?(this,context)\n"]}